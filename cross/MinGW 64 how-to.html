<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>

  <meta http-equiv="content-type" content="text/html; charset=windows-1252">
  <meta name="robots" content="index,follow">
  <meta name="description" content="mingw how-to">
  <title>MinGW 64 how-to</title>
  <style type="text/css">
	h3 {color:blue;} 
	h4 {color:red;} 
	b {color:brown;}
	b.cmd {color:navy; font-family:monospace;}
	b.err {color:red; font-family:monospace;}
	u {color:green;}
	i {color:navy;}
	td.msw {font-family:monospace;}
  </style>
</head><body bgcolor="#fffff0">
<a href="http://www.gaia-gis.it/spatialite-3.0.0-BETA/sources.html">back</a>
<h3>Index of contents</h3>
<ul>
	<li><a href="#env">Setting up the MinGW 64 environment</a></li>
	<li><a href="#libiconv">Step 1) building libiconv</a></li>
	<li><a href="#libz">Step 2) building libz</a></li>
	<li><a href="#libjpeg">Step 3) building libjpeg</a></li>
	<li><a href="#libpng">Step 4) building libpng</a></li>
	<li><a href="#libtiff">Step 5) building libtiff</a></li>
	<li><a href="#libproj">Step 6) building libproj</a></li>
	<li><a href="#libgeotiff">Step 7) building libgeotiff</a></li>
	<li><a href="#libgeos">Step 8) building libgeos</a></li>
	<li><a href="#libexpat">Step 9) building libexpat</a></li>
	<li><a href="#libspatialite">Step 10) building libspatialite</a></li>
	<li><a href="#spatialite-tools">Step 11) building spatialite-tools</a></li>
	<li><a href="#wxWidgets">Step 12) building wxWidgets MSW</a></li>
	<li><a href="#libfreetype">Step 13) building libfreetype</a></li>
	<li><a href="#libfontconfig">Step 14) building libfontconfig</a></li>
	<li><a href="#libpixman">Step 15) building libpixman</a></li>
	<li><a href="#libcairo">Step 16) building libcairo</a></li>
	<li><a href="#libgaiagraphics">Step 17) building libgaiagraphics</a></li>
	<li><a href="#spatialite-gui">Step 18) building spatialite_gui</a></li>
	<li><a href="#open-ssl">Step 19) building OpenSSL</a></li>
	<li><a href="#libcurl">Step 20) building libcurl</a></li>
</ul>
<hr>
<h3><a name="env">Setting up the MinGW 64 environment</a></h3>
<b>MinGW 64</b> is an <i>open source</i> C/C++ compiler based on the 
popular <b>gcc</b>; basically, it is intended to generate executables for <b> Windows 64 bit</b>.<br><br>
We'll suppose that you already have a basic familiarity with <i>standard</i> <b>MinGW 32 + MSYS</b>:
<b>MinGW 64</b> is more or less the same, but acting (<i>more or less</i>) as a <b>cross-compiler</b>.<br>
This practically means that you can build <b>64 bit</b> executables on any <b>Win32</b> platform:
but obviously any 64 bit program requires some <b>Windows 64</b> platform to be executed.<br><br>
The standard build tool-chain [<i>originally developed for Linux</i>] natively supports <u>cross-compilers</u>:
and this works under Windows as well, e.g. using <i>MinGW 64</i>.<br> 
As you surely already know, the <i><u>standard build procedure</u></i> is the following one:<br><br>
<b class="cmd">./configure</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install</b><br><br>
Using the <i>MinGW 64 cross-compiler</i> is the same of using <i>standard</i> <b>MinGW32</b>:
but in this case you are required to always specify the following <i>./configure</i> argument:<br><br>
<b class="cmd">./configure  --host=x86_64-w64-mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install</b><br><br>
The above <b>--host</b> directive is enough for <b>./configure</b> to intend that a 
<u>cross-compilation</u> is required: and that the intended target is <i>Windows 64 bit</i>.<br>
There are many different ways to deploy <b>MinGW 64</b> (this including cross-compiling on <i>Linux</i> or <i>Cygwin</i>).<br>
After some careful preliminary testing, I choosed the following one because it appairs the most straightforward:
<ul>
	<li>I already had <i>MinGW32+MSYS</i> installed on the <i>Windows 7 64 bit</i> box I use to develop Win32 sw:<br>
		so I decided to install <i>MinGW 64</i> as well on the same platform.</li>
	<li>mixing up at random <u>32 bit</u> and <u>64 bit</u> binaries doesn't seem so good at all:<br>
		so I've purposely choosen an appropriate configuration, completely avoiding any undesirable confusion.</li>
	<li>anyway, you are absolutely free to choose the configuration best fit for your specific requirements: 
		simply read the appropriate documentation.</li>
</ul>
<img src="MinGW%2064%20how-to_files/mingw-layout.html" alt="mingw disk layout"><br>
Once I decided the most appropriate disk layout, I duly started installing <b>MinGW 64</b> on <b>Windows 7 Pro 64 bit</b>:
<ul>
	<li>first I've downloaded the most recent <a href="http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Automated%20Builds/">
mingw-w64-bin_i686-mingw_yyyymmdd.zip</a> for Win32</li>
	<li>then I've <i>unzipped</i> all this stuff into the <b>C:\MinGW64</b> directory.</li>
	<li>and finally I've downloaded the most recent MinGW 64 own <a href="http://sourceforge.net/apps/trac/mingw-w64/wiki/MSYS">MSYS</a></li>
	<li>once I've installed it into the <b>C:\msys64</b> directory (completing the <i>postinstall</i> procedure) I was immediately ready to work.</li>
</ul>
<table bgcolor="#d0d0d0"><tbody><tr><td>
<h3>PostInstallation tasks</h3>
<u>Step #1:</u> carefully check the <b>C:\msys64\etx\fstab</b> file; it <u>must</u> contain the following row:
(<i>this will automatically <u>mount</u> C:\MinGW64 as /mingw</i>)<br>
<b class="cmd">C:/MinGW64	/mingw</b><br><br>
<u>Step #2:</u> a dangerous issue exists: the <b>MinGW 64</b> own <b>MSYS</b> is someway broken
(<i>as I painfully discoverd by trial and error ...</i>): the <b>C:\msys64\bin\find.exe</b> executable is badly missing.<br>
Unhappily enough, Windows has its own <b>FIND.EXE</b> (<i>and it's a completely different thing from the Linux <b>find</b></i>):
this may cause several builds to misteriously fail ... but now you are well aware of this dangerous pitfall.
You simply have to manually pick <b>find.exe</b> from the <i>standard</i> <b>MinGW 32 / MSYS</b> installation, 
then copying this executable file into <b>C:\msys64\bin</b>.<br><br>
<u>Step #3:</u> the cross-compiler tool-chain seems to be a little bit confused about <b>strip</b> real name:
this simple trick seems to definitively resolve any related issue.<br>
<b class="cmd">cp /mingw/bin/x86_64-w64-mingw32-strip.exe /mingw/bin/strip.exe</b>
</td></tr></tbody></table><br>
<table bgcolor="#d0d0d0"><tbody><tr><td>
<h3><a name="pkg-config">Preparing to use <b>PKG-CONFIG</b></a>:</h3>
You simply have to follow the same identical procedure already explained for <i>standard</i> <b>MinGW 32 + MSYS</b>
</td></tr></tbody></table><br> 
<table bgcolor="#d0d0d0"><tbody><tr><td colspan="2">
<h3>Learming to identify <b>32 bit</b> and <b>64 bit</b> exacutables</h3></td></tr>
<tr><td><i><b>32 bit</b> binaries</i></td>
<td>
<b class="cmd">file iconv.exe</b><br>
<b class="cmd">PE32 executable for MS Windows (console) Intel 80386 32-bit</b><br><br>
<b class="cmd">file libiconv-2.dll</b><br>
<b class="cmd">PE32 executable for MS Windows (DLL) (console) Intel 80386 32-bit</b>
</td></tr>
<tr><td colspan="2"><hr></td></tr>
<tr><td><i><b>64 bit</b> binaries</i></td>
<td>
<b class="cmd">file iconv.exe</b><br>
<b class="cmd">PE32+ executable for MS Windows (console) Mono/.Net assembly</b><br><br>
<b class="cmd">file libiconv-2.dll</b><br>
<b class="cmd">PE32+ executable for MS Windows (DLL) (console) Mono/.Net assembly</b>
</td></tr></tbody></table><br>
<table bgcolor="#d0d0d0"><tbody><tr><td>
<h3>Setting up Windows own (SYSTEM) libraries</h3>
Some apps (and libraries) require to be actually linked against MS Windows system libraries.
And this is a really puzzling task using <b>MinGW 64</b>.<br><br>
<u>Very shortly explained:</u> the standard GCC <i>tool-chain</i> has the ability to link both <b>.DLL</b> <i>dynamic</i> libraries
and <b>.a</b> <i>static</i> libraries.<br>
When <i>Windows own <u>system</u> libraries</i> are required, this isn't at all an issue for <i>MinGW 32</i>:
<ul>
	<li>any required <i>system .dll</i> is surely installed (usually on <b>C:\Windows\System32</b>)</li>
	<li>the corresponding <i>.a static libraries</i> are shipped by <i>MinGW</i> itself
		(<i>and actually simply are <u>stubs</u> pointing to the corresponding DLL</i>)</li>
</ul>
But when using <b>MinGW 64</b> a catastrophical issue arises:
<ul>
	<li>on Windows 64 bit platforms <b>C:\Windows\System32</b> is somehow <u>wizardry cursed</u>
		(<i>as I discovered in the most painfull way ...</i>)</li>
	<li>when a <i>32 bit</i> executable attemptes to get any DLL from <i>C:\Windows\System32</i>
		then the <u>32 bit DLL</u> will be found</li>
	<li>and when a <i>64 bit</i> executable attemptes to get any DLL from <i>C:\Windows\System32</i>
		then the <u>64 bit DLL</u> will be found</li>
	<li>sadly, there is absolutely no way to explicity identify (<i>by path</i>) which one version do you
		really intend to access.<br>
		a damned <u>automamagical</u> trick, acting as a <u>black magic spell</u>
		decides for you what are you loocking for: and there is no way to circumvent this odd behaviour.<br>
		you can get further details from this Wikipedia article:
		<a href="http://en.wikipedia.org/wiki/WoW64">SysWOW64</a></li>
	<li>unhappily, the <b>MinGW 64</b> tool-chain actually is a <i>cross-compiler</i>: it actually generates
		<u>64 bit executables</u>, but the tool-chain tools themselves are <u>32 bit</u></li>
	<li>and accordingly to this, the <u>GCC linker</u> will always fail when some <i>system DLL</i>
		is required, simply because it will inexorably found the corresponding <u>32 bit DLL</u> instead ...<br>
		obviously not at compatible with a <u>64 bit</u> executable.</li>
</ul>
<hr>
<h3>How to circumvent this dangerous pitfall</h3>
Once we have identified the reasons causing the above link failure, <i>caring any nursing</i> isn't too much difficult.
<ul>
	<li>we simply have to <u>copy</u> any required <i>Windows own system DLL</i> on some sane and safe
		location, i.e. on some <i>normal</i>, <i>not cursed</i>) directory, possibly included within the linker search path.</li>
	<li>all this isn't at all difficult: you simply have to use <u>Windows own tools</u> (e.g. GUI <i>copy &amp; paste</i>,
		or the command <u>copy</u> from the command shell).<br>
		Windows own tools are <u>64 bit</u> executables, and will consequently magically pick up the <u>64 bit</u>
		version of any DLL from <u>C:\Windows\System32</u></li>
	<li>I've personally choosen <b>C:\MinGW64\x86_x64-w64-mingw32\lib</b> (corresponding to <b>/mingw/x86_64-w64-mingw32-lib</b>) 
		as my default location.</li>
	<li>The DLLs required to build SpatiaLite and friends are: <u>gdi32.dll</u>, <u>msimg32</u>, <u>ws2_32.dll</u>,
		<u>crypt32.dll</u> and <u>Wldap32.dll</u><br>
		<b>Please note well:</b> you must rename theam respectively as: <u>libgdi32.dll</u>, <u>libmsimg32</u>, <u>libws2_32.dll</u>,
		<u>libcrypt32.dll</u> and <u>libwldap32.dll</u></li>
</ul>
</td></tr></tbody></table><br>
All right: we are now ready to start creating our <b>Windows 64 bit</b> software. Let's go !<br> 
<h4>Be warned: building on MinGW 64 is more or less the same as building on MinGW 32:
anyway here and there some further patch is absolutely required.</h4>
<h4>Please, carefully read and verbatim follow any given instruction.</h4>
<hr>
<h3><a name="libiconv">Step 1) building libiconv</a></h3>
<b>libiconv</b> is the standard <b>GNU</b> library supporting <i>locale 
charsets</i>.<br>
Required by: <b>libspatialite</b>, <b>spatialite-tools</b><br><br>
Building under Windows is not too much difficult.
<ul>
	<li>download <a href="http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.13.1.tar.gz">libiconv-1.13.1.tar.gz</a></li>
	<li>uncompress this gzipped-file</li>
	<li>then untar the <i>tarball</i></li>
	<li>and finally open an MSYS shell</li>
</ul>
<b class="cmd">cd libiconv-1.13.1</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
Anyway, this will simply build and install the DLL: a further step is required in order to get the <i>static library</i> as well.<br><br>
<b class="cmd">make distclean</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32 --disable-shared</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
Now you've built and installed both the <i>static library</i> and the DLL.<br>
However the above process has installed badly misconfigured <b>libcharset.la</b> and <b>libiconv.la</b> files<br>
(which are required to build other libraries in the following steps).<br>
So in order to get a properly configured <b>libiconv</b> you have to accomplish a further operation: 
<ul>
	<li>download <a href="http://www.gaia-gis.it/spatialite-2.5.0/libiconv.la">libiconv.la</a>
		and <a href="http://www.gaia-gis.it/spatialite-2.5.0/libcharset.la">libcharset.la</a></li>
	<li>then copy both files: <b class="cmd">cp libiconv.la libcharset.la /usr/local/lib</b></li>
</ul>
<hr>
<h3><a name="libz">Step 2) building libz</a></h3>
<b>libz</b> is a popular library implementing <i>Deflate</i>, i.e. the 
compression algorithm used by <b>gzip</b> and <b>Zip</b>.<br>
Depends on: <b>nothing</b><br>
Required by: <b>libpng</b>, <b>libtiff</b>, ...<br><br>
Building under Windows is quite easy, but requires to pay some 
attenction.
<ul>
	<li>download the latest sources: <a href="http://zlib.net/zlib125.zip">zlib125.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
A very simple patch is required: you must first edit the <b>zlib-1.2.5/win32/Makefile.gcc</b> file:
<table bgcolor="#ffffe0">
<tbody><tr><td>38c38</td></tr>
<tr><td>&lt; PREFIX = </td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; PREFIX = x86_64-w64-mingw32-</td></tr>
</tbody></table><br>
After applying the above patch you are now to build <i>zlib</i>:<br><br>
<b class="cmd">cd zlib-1.2.5</b><br>
<b class="cmd">make -f win32/Makefile.gcc</b><br><br>
Now you simply have to manually copy the following files:<br><br>
<b class="cmd">cp zlib1.dll /usr/local/bin</b><br>
<b class="cmd">cp zconf.h zlib.h /usr/local/include</b><br>
<b class="cmd">cp libz.a /usr/local/lib</b><br>
<b class="cmd">cp libzdll.a /usr/local/lib/libz.dll.a</b><br><br>
All this will build and install both the <i>static library</i> and the DLL as well.<br>
Anyway this process will not generate the <b>libz.la</b> file (which is required to build <b>libtiff</b> in one
of the following steps.<br>
So in order to get a fully installed <b>libz</b> you have to accomplish a further operation: 
<ul>
	<li>download <a href="http://www.gaia-gis.it/spatialite-2.5.0/libz.la">libz.la</a></li>
	<li>and then copy this file: <b class="cmd">cp libz.la /usr/local/lib</b></li>
</ul>
<hr>
<h3><a name="libjpeg">Step 3) building libjpeg</a></h3>
<b>libjpeg</b> is a popular library supporting the <b>JPEG</b> image 
compression.<br>
Depends on: <b>nothing</b><br>
Required by: <b>libtiff</b>, <b>libgaiagraphics</b>
<br><br><u>Important notice</u>: you can now choose between two alternative implementations:
<ul>
	<li><b>libjpeg</b> is the <u>standard, plain</u> library</li>
	<li><b>libjpeg-turbo</b> is a new library, that fully takes profit from the most recent Intel/AMD CPUs<br>
		If you are planning to deploy your software on such platforms, then using <i>libjpeg-turbo</i>
		can ensure a <b>200%</b> performance boost (and even more than this).<br>
		I <u>strongly</u> recommend using <i>libjpeg-turbo</i>: both libraries share
		the same identical API/ABI (they are absolutely inter-changeable), but <i>libjpeg-turbo</i>
		runs in an impressively faster mode.</li>
</ul>
Building the one or the other under Windows is absolutely a plain and easy task.
<h4>How-to-build libjpeg-turbo</h4>
<b><u>Please note</u></b>: the <b>NASM</b> assembler is absolutely required: if you don't have it already installed 
on your system, you can <a href="http://www.nasm.us/">download</a> and install now.
<ul>
	<li>download the latest sources: <a href="http://sourceforge.net/projects/libjpeg-turbo/files/1.1.1/libjpeg-turbo-1.1.1.tar.gz/download/">
		libjpeg-turbo-1.1.1.tar.gz</a></li>
	<li>uncompress this gzipped-file</li>
	<li>then untar the <i>tarball</i></li>
	<li>and finally open an MSYS shell</li>
</ul>
<b class="cmd">cd libjpeg-turbo-1.1.1</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32 --prefix=/usr/local</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
This will build and install both the <i>static library</i> and the DLL 
as well.
<h4>How-to-build libjpeg</h4>
<ul>
	<li>download the latest sources: <a href="http://www.ijg.org/files/jpegsr8b.zip">jpegsr8b.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
<b class="cmd">cd jpeg-8b</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32 </b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
This will build and install both the <i>static library</i> and the DLL 
as well.
<hr>
<h3><a name="libpng">Step 4) building libpng</a></h3>
<b>libpng</b> is a popular library supporting the <b>PNG</b> image 
compression.<br>
Depends on: <b>libz</b><br>
Required by: <b>libgaiagraphics</b><br><br>
Building under Windows is absolutely a plain and easy task.
<ul>
	<li>download the latest sources: <a href="ftp://ftp.simplesystems.org/pub/libpng/png/src/libpng-1.5.2.tar.gz">libpng-1.5.2.tar.gz</a></li>
	<li>uncompress this gzipped-file</li>
	<li>then untar the <i>tarball</i></li>
	<li>and finally open an MSYS shell</li>
</ul>
<b class="cmd">cd libpng-1.5.2</b><br>
<b class="cmd">export "CFLAGS=-I/usr/local/include"</b><br>
<b class="cmd">export "LDFLAGS=-L/usr/local/lib"</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
<u>Important notice</u>: you have to properly set the shell environment 
in order to retrieve the already installed <b>libz</b>;
this is the duty of the two above <u>export</u> directives.<br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<u>Important notice #2</u>: in order to get <b>./configure</b> support you
must absolutely download the <b>.tar.gz</b>, because the <b>.zip</b> doesn't supports it.
<hr>
<h3><a name="libtiff">Step 5) building libtiff</a></h3>
<b>libtiff</b> is a popular library supporting the <b>TIFF</b> image 
format.<br>
Depends on: <b>libz</b>, <b>libjpeg</b><br>
Required by: <b>libgaiagraphics</b><br><br>
Building under Windows is absolutely a plain and easy task.
<ul>
	<li>download the latest sources: <a href="http://download.osgeo.org/libtiff/tiff-3.9.5.zip">tiff-3.9.5.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
<b class="cmd">cd tiff-3.9.5</b><br>
<b class="cmd">export "CFLAGS=-I/usr/local/include"</b><br>
<b class="cmd">export "LDFLAGS=-L/usr/local/lib"</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
<u>Important notice</u>: you have to properly set the shell environment 
in order to retrieve the already installed <b>libz</b>;
this is the duty of the two above <u>export</u> directives.<br><br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<u>Important notice</u>: <b>MinGW 64</b> seems to generate absolutely crazy <b>.la</b> files.<br>
So you have to manually apply the following patch to avoid any possible further issue.<br>
You are now required to manually edit the <b>/usr/local/lib/libtiffxx.la</b> file as follows:
<ul>
	<li>search for a line starting with: <u>dependency_libs=</u></li>
	<li>you'll find within the associated value a <i>crazy</i> path like:<br>
<i>/c/bb/vista64-mingw32/mingw-x86-x86_64/build/build/root/x86_64-w64-mingw32/lib/../lib/libstdc++.la<br> 
-L/c/bb/vista64-mingw32/mingw-x86-x86_64/build/build/gcc/obj/x86_64-w64-mingw32/libstdc++-v3/src<br>
-L/c/bb/vista64-mingw32/mingw-x86-x86_64/build/build/gcc/obj/x86_64-w64-mingw32/libstdc++-v3/src/.libs<br> 
-L/c/bb/vista64-mingw32/mingw-x86-x86_64/build/build/root/x86_64-w64-mingw32/lib<br>
-L/c/bb/vista64-mingw32/mingw-x86-x86_64/build/build/root/mingw/lib</i></li>
	<li>simply replace all the above garbage with: <u>C:/MinGW64/x86_64-w64-mingw32/lib/libstdc++.la</u></li>
	<li>save and exit</li>
</ul>
<hr>
<h3><a name="libproj">Step 6) building libproj</a></h3>
<b>libproj</b> is a library supporting coordinate's transformation 
between different Reference Systems [<b>PROJ.4</b>]<br>
Depends on: <b>nothing</b><br>
Required by: <b>libgeotiff</b>, <b>libspatialite</b>, <b>spatialite-tools</b><br><br>
Building under Windows is an easy task.
<ul>
	<li>download the latest sources: <a href="http://download.osgeo.org/proj/proj-4.7.0.zip">proj-4.7.0.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
<b class="cmd">cd proj-4.7.0</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32 --without-mutex</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
<u>Important notice</u>: may well be you'll get the following fatal 
errors:<br><br>
<table bgcolor="#d0d0d0">
<tbody><tr><td>pj_mutex.c:167: error: redefinition of 'pj_acquire_lock'</td></tr>
<tr><td>pj_mutex.c:65: error: previous definition of 'pj_acquire_lock' 
was here</td></tr>
<tr><td>pj_mutex.c:181: error: redefinition of 'pj_release_lock'</td></tr>
<tr><td>pj_mutex.c:75: error: previous definition of 'pj_release_lock' 
was here</td></tr>
<tr><td>pj_mutex.c:192: error: redefinition of 'pj_cleanup_lock'</td></tr>
<tr><td>pj_mutex.c:82: error: previous definition of 'pj_cleanup_lock' 
was here</td></tr>
<tr><td>pj_mutex.c:206: error: redefinition of 'pj_init_lock'</td></tr>
<tr><td>pj_mutex.c:91: error: previous definition of 'pj_init_lock' was 
here</td></tr>
</tbody></table><br>
in such an evenience you have to edit the <b>-/src/pj_mutex.c</b> source
 as follows:<br><br>
<table bgcolor="#ffffe0">
<tbody><tr><td>33c33</td></tr>
<tr><td>&lt; #ifndef _WIN32</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; #if defined (_WIN32) &amp;&amp; !defined(__MINGW32__)</td></tr>
<tr><td><hr></td></tr>
<tr><td>40c40</td></tr>
<tr><td>&lt; #ifndef _WIN32</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; #if defined (_WIN32) &amp;&amp; !defined(__MINGW32__)</td></tr>
</tbody></table>
<hr>
<h3><a name="libgeotiff">Step 7) building libgeotiff</a></h3>
<b>libgeotiff</b> is a library supporting the <b>GeoTIFF</b> raster 
format<br>
Depends on: <b>libtiff</b>, <b>libproj</b><br>
Required by: <b>libgaiagraphics</b><br><br>
Building under Windows is an easy task.
<ul>
	<li>download the latest sources: <a href="http://download.osgeo.org/geotiff/libgeotiff/libgeotiff-1.3.0.zip">libgeotiff130.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
<b class="cmd">cd libgeotiff-1.3.0</b><br>
<b class="cmd">export "CFLAGS=-I/usr/local/include"</b><br>
<b class="cmd">export "LDFLAGS=-L/usr/local/lib"</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32 --enable-incode-epsg</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
<u>Important notice</u>: it doesn't seem possible to build as a DLL 
using MinGW + MSYS. AFAIK, there is no way to do such a thing.<br>
So you have to manually apply the following patch to circumvent this issue.
Edit the <b>/usr/local/lib/libgeotiff.la</b> file as follows:<br><br>
<table bgcolor="#ffffe0">
<tbody><tr><td>10c10</td></tr>
<tr><td>&lt; library_names=''</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; library_names='libgeotiff.a'</td></tr>
<tr><td><hr></td></tr>
</tbody></table>
<hr>
<h3><a name="libgeos">Step 8) building libgeos</a></h3>
<b>libgeos</b> is a library representing a <b>C++</b> porting of <b>JTS</b>
 [<i>Java Topology Suite</i>].<br>
Depends on: <b>nothing</b><br>
Required by: <b>libspatialite</b>, <b>spatialite-tools</b><br><br>
This library really is an <u>huge and complex</u> piece of software; 
building on Windows is an incredibly time consuming task.
<ul>
	<li>download the latest sources: <a href="http://download.osgeo.org/geos/geos-3.3.0.tar.bz2">geos-3.3.0.tar.bz2</a></li>
	<li>uncompress this bzip2-file</li>
	<li>then untar the <i>tarball</i></li>
	<li>and finally open an MSYS shell</li>
</ul>
<b class="cmd">cd geos-3.3.0</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32</b><br><br>

<u>Important notice:</u> before attempting to start compiling you are required to manually apply the following patch:<br>
(<i>not at all elegant, but fully effective</i>); so edit the <b>geos-3.3.0/include/geos/platform.h</b> header:
<table bgcolor="#ffffe0">
<tbody><tr><td>near line 62:<br>------------</td></tr>
<tr><td>&lt; #ifdef HAVE_INT64_T_64<br>
&lt; &nbsp;&nbsp;typedef int64_t int64;<br>
&lt; #else<br>
&lt; #&nbsp;ifdef HAVE_LONG_LONG_INT_64<br>
&lt; &nbsp;&nbsp;&nbsp;typedef long long int int64;<br>
&lt; #&nbsp;&nbsp;else<br>
&lt; &nbsp;&nbsp;&nbsp;typedef long int int64;<br>
&lt; #&nbsp;&nbsp;ifndef HAVE_LONG_INT_64<br>
&lt; #&nbsp;&nbsp;&nbsp;define INT64_IS_REALLY32 1<br>
&lt; #&nbsp;&nbsp;&nbsp;warning "Could not find 64bit integer definition!"<br>
&lt; #&nbsp;&nbsp;endif<br>
&lt; #&nbsp;endif<br>
&lt; #endif</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; /*<br>
&gt; #ifdef HAVE_INT64_T_64<br>
&gt; &nbsp;&nbsp;typedef int64_t int64;<br>
&gt; #else<br>
&gt; #&nbsp;ifdef HAVE_LONG_LONG_INT_64<br>
&gt; &nbsp;&nbsp;&nbsp;typedef long long int int64;<br>
&gt; #&nbsp;&nbsp;else<br>
&gt; &nbsp;&nbsp;&nbsp;typedef long int int64;<br>
&gt; #&nbsp;&nbsp;ifndef HAVE_LONG_INT_64<br>
&gt; #&nbsp;&nbsp;&nbsp;define INT64_IS_REALLY32 1<br>
&gt; #&nbsp;&nbsp;&nbsp;warning "Could not find 64bit integer definition!"<br>
&gt; #&nbsp;&nbsp;endif<br>
&gt; #&nbsp;endif<br>
&gt; #endif<br>
&gt; */<br>
&gt; typedef long long int int64;</td></tr>
<tr><td><hr></td></tr>
</tbody></table><br>
and now you are relly ready to start building GEOS:<br><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<u>Important notice</u>: we have already seen this about <a href="#libtiff">libtiff</a>: 
<b>MinGW 64</b> seems to generate absolutely crazy <b>.la</b> files.<br>
So you have to manually apply the following patch to avoid any possible further issue.<br>
You are now required to manually edit both <b>/usr/local/lib/libgeos.la</b> and <b>/usr/local/lib/libgeos_c.la</b> files as follows:
<ul>
	<li>search for a line starting with: <u>dependency_libs=</u></li>
	<li>simply replace any <i>crazy</i> path with: <u>C:/MinGW64/x86_64-w64-mingw32/lib/libstdc++.la</u></li>
	<li>save and exit</li>
</ul>
<hr>
<h3><a name="libexpat">Step 9) building libexpat</a></h3>
<b>libexpat</b> is a well known standard library supporting <b>XML parsing</b>.<br>
Depends on: <b>nothing</b><br>
Required by: <b>libfontconfig</b>, <b>spatialite-tools</b>, ...<br><br>
Building under Windows really is a piece-of-cake.
<ul>
	<li>download the latest sources: <a href="http://sourceforge.net/projects/expat/files/expat/2.0.1/expat-2.0.1.tar.gz/download">expat-2.0.1.tar.gz</a></li>
	<li>uncompress this gzipped-file</li>
	<li>then untar the <i>tarball</i></li>
	<li>and finally open an MSYS shell</li>
</ul>
<b class="cmd">cd expat-2.0.1</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32</b><br><br>
<u>Important notice:</u> before attempting to start compiling you are required to manually apply the following patch:<br>
(<i>not at all elegant, but fully effective</i>); so edit the <b>C:\MinGW64\x86_64-w64-mingw32\include\process.h</b> header:
<table bgcolor="#ffffe0">
<tbody><tr><td>165c165:<br>------------</td></tr>
<tr><td>&lt; int __cdecl execv(const char *_Filename,char *const _ArgList[]) __MINGW_ATTRIB_DEPRECATED_MSVC2005;</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; int __cdecl execv(const char *_Filename,const char * _ArgList[]) __MINGW_ATTRIB_DEPRECATED_MSVC2005;</td></tr>
<tr><td><hr></td></tr>
</tbody></table>
and now you are really ready to start building <b>expat</b> (<i>you can recover back again the above change once you've terminated</i>):<br><br>
<b class="cmd">make</b><br>
<b class="cmd">make install</b><br><br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<hr>
<h3><a name="libspatialite">Step 10) building libspatialite</a></h3>
<b>libspatialite</b> is the main core of <b>SpatiaLite</b><br>
Depends on: <b>libiconv</b>, <b>libproj</b>, <b>libgeos</b><br>
Required by: <b>spatialite-tools</b>, <b>librasterlite</b><br><br>
Building under Windows is an easy task.
<ul>
	<li>download the latest sources: <a href="http://www.gaia-gis.it/spatialite-3.0.0-BETA/libspatialite-amalgamation-3.0.0-beta.zip">libspatialite-amalgamation-3.0.0-beta.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
<b class="cmd">cd libspatialite-amalgamation-3.0.0-beta</b><br>
<b class="cmd">export "CFLAGS=-I/usr/local/include"</b><br>
<b class="cmd">export "LDFLAGS=-L/usr/local/lib"</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32 --target=mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<u>Important notice</u>: we have already seen this about <a href="#libtiff">libtiff</a>: 
<b>MinGW 64</b> seems to generate absolutely crazy <b>.la</b> files.<br>
So you have to manually apply the following patch to avoid any possible further issue.<br>
You are now required to manually edit both <b>/usr/local/lib/libspatialite.la</b> files as follows:
<ul>
	<li>search for a line starting with: <u>dependency_libs=</u></li>
	<li>simply replace any <i>crazy</i> path with: <u>C:/MinGW64/x86_64-w64-mingw32/lib/libstdc++.la</u></li>
	<li>save and exit</li>
</ul>
<hr>
<h3><a name="spatialite-tools">Step 11) building spatialite-tools</a></h3>
<b>spatialite-tools</b> the <b>SpatiaLite</b> <i>command-line</i> 
management tools<br>
Depends on: <b>libiconv</b>, <b>libproj</b>, <b>libgeos</b>, <b>libspatialite</b>, <b>libexpat</b><br>
Building under Windows is an easy task.
<ul>
	<li>download the latest sources: <a href="http://www.gaia-gis.it/spatialite-3.0.0-beta/spatialite-tools-3.0.0-beta.zip">spatialite-tools-3.0.0-beta.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
First of all, you must check if you've already installed <b>pkg-config.exe</b><br>
If not, please read the above <a href="#pkg-config">instructions</a><br><br>
And now you must set the <b>PKG_CONFIG_PATH</b> as appropriate:<br><br>
<b class="cmd">export "PKG_CONFIG_PATH=/usr/local/lib/pkgconfig"</b><br><br>
After this you are now ready to build as usual:<br><br>
<b class="cmd">cd spatialite-tools-3.0.0-beta</b><br>
<b class="cmd">export "CFLAGS=-I/usr/local/include"</b><br>
<b class="cmd">export "LDFLAGS=-L/usr/local/lib"</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32 --target=mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
<u>Please note</u>: following the above method you'll get <i>dynamically linked</i> tools [i.e. depending on DLLs].<br>
If you whish instead to build <i>statically linked</i> tools 
[i.e. self contained, not depending on DLLs], you must first<br>
manually edit the <b>Makefile-static-MinGW</b> file as follows:<br>
<table bgcolor="#ffffe0">
<tbody><tr><td>&lt; CC = g++</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; CC = x86_64-w64-mingw32-g++'</td></tr>
<tr><td><hr></td></tr>
</tbody></table>
after this you are now ready to build your <i>statically linked</i> tools:<br><br>
<b class="cmd">mkdir static_bin</b><br>
<b class="cmd">make -f Makefile-static-MinGW</b><br>
<b class="cmd">cp static_bin/* /usr/local/bin</b><br><br>
<hr>
<h3><a name="wxWidgets">Step 12) building wxWidgets MSW</a></h3>
<b>wxWidgets</b> is a popular <i>widgets</i> library, supporting GUI in a
 cross-platform fashion;
<b>MSW</b> is the specific porting supporting Windows.<br>
Depends on: <b>nothing</b><br>
Required by: <b>spatialite-gui</b>, <b>spatialite-gis</b><br><br>
This library really is an <u>huge and complex</u> piece of software; 
building on Windows is an incredibly time consuming task, 
but is quite plain and easy.
<ul>
	<li>download the latest sources: <a href="http://prdownloads.sourceforge.net/wxwindows/wxMSW-2.8.12.zip">wxMSW-2.8.12.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
<b class="cmd">export "CXXFLAGS=-fpermissive"</b>
&nbsp;&nbsp;&nbsp;&nbsp;[<i>this directive is absolutely required to skip some blocking errors</i>]<br>
<b class="cmd">cd wxMSW-2.8.12</b><br>
<b class="cmd">mkdir msw_build</b><br>
<b class="cmd">cd msw_build</b><br>
<b class="cmd">../configure --host=x86_64-w64-mingw32 --disable-shared --disable-debug \<br>
&nbsp;&nbsp;&nbsp;&nbsp;--disable-threads --enable-monolithic --enable-unicode \<br>
&nbsp;&nbsp;&nbsp;&nbsp;--without-libjpeg --without-libpng --without-zlib\<br>
&nbsp;&nbsp;&nbsp;&nbsp;--without-libtiff --without-expat --without-regex</b><br><br>
<u>Please note</u>: the wxMSW ./configure is highly configurable: you 
must apply exactly the above settings.<br>
Anyway, when ./configure stops, it's a good practice to check if the 
final report looks exactly like this:<br><br>
<table border="1" bgcolor="#ffffe0"><tbody><tr><td class="msw">
Configured wxWidgets 2.8.12 for `x86_64-w64-mingw32'<br><br>
&nbsp;&nbsp;Which GUI toolkit should wxWidgets 
use?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msw<br>
&nbsp;&nbsp;Should wxWidgets be compiled into single 
library?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes<br>
&nbsp;&nbsp;Should wxWidgets be compiled in debug 
mode?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;Should wxWidgets be linked as a shared 
library?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;Should wxWidgets be compiled in Unicode 
mode?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes<br>
&nbsp;&nbsp;What level of wxWidgets compatibility should be enabled?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wxWidgets



 2.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wxWidgets



 2.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yes<br>
&nbsp;&nbsp;Which libraries should wxWidgets use?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jpeg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;png&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;regex&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tiff&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zlib&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;odbc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expat&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;libmspack&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sdl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no<br>
</td></tr></tbody></table><br>
now, when ./configure stops, you have to continue as usual:<br><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
<u>Important notice</u>: <b>wxWidgets</b> is now configured for any further usage: but unhappily
it assumes being on <i>Win32</i>, and this is obviously wrong.<br>
So you must manually adjust the <b>wx-config</b> script (<u>/usr/local/bin/wx-widgets</u>) as follows:
<ul>
	<li>search for a line starting with: <u>ldlibs_base=</u></li>
	<li>and on the corresponding value then simply delete: <u>-lwctl3d32</u><br>
		(<i>this obsolete library doesn't exists any longer on <u>Win64</u>, and isn't actually required at all</i>).</li>
	<li>now search for any occurrenct of the string: <u>--define __WIN32__ --define __WIN95__ --define __GNUWIN32__</u></li>
	<li>and replace the above value with: <u>--define WX_CPU_AMD64</u><br>
		(<i>this is required so to create <u>64 bit</u> resource files</i>)</li>
	<li>save and exit</li>
</ul>
<hr>
<h3><a name="libfreetype">Step 13) building libfreetype</a></h3>
<b>libfreetype</b> is a standard library supporting <b>TrueType</b> fonts.<br>
Depends on: <b>nothing</b><br>
Required by: <b>libcairo</b>, ...<br><br>
Building under Windows is an easy task.
<ul>
	<li>download the latest sources: <a href="http://download.savannah.gnu.org/releases/freetype/freetype-2.4.4.tar.gz">freetype-2.4.4.tar.gz</a></li>
	<li>uncompress this gzipped-file</li>
	<li>then untar the <i>tarball</i></li>
	<li>and finally open an MSYS shell</li>
</ul>
<b class="cmd">cd freetype-2.4.4</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install</b><br><br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<hr>
<h3><a name="libfontconfig">Step 14) building libfontconfig</a></h3>
<b>libfontconfig</b> is a standard library supporting <b>font customization</b> and configuration.<br>
Depends on: <b>libexpat</b>, <b>libfreetype</b>, <b>libiconv</b><br>
Required by: <b>libcairo</b>, ...<br><br>
Building under Windows is an easy task.
<ul>
	<li>download the latest sources: <a href="http://fontconfig.org/release/fontconfig-2.8.0.tar.gz">fontconfig-2.8.0.tar.gz</a></li>
	<li>uncompress this gzipped-file</li>
	<li>then untar the <i>tarball</i></li>
	<li>and finally open an MSYS shell</li>
</ul>
<b class="cmd">cd fontconfig-2.8.0</b><br>
<b class="cmd">export "CFLAGS=-I/usr/local/include"</b><br>
<b class="cmd">export "LDFLAGS=-L/usr/local/lib"</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32 --disable-docs</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<hr>
<h3><a name="libpixman">Step 15) building libpixman</a></h3>
<b>libpixman</b> is the standard library implementing <b>pixel manipulation</b> for Cairo.<br>
Depends on: <b>nothing</b><br>
Required by: <b>libcairo</b>, ...<br><br>
Building under Windows is an easy task.<br>
First of all, you must check if you've already installed <b>pkg-config.exe</b><br>
If not, please read the above <a href="#pkg-config">instructions</a><br><br>
And now you must set the <b>PKG_CONFIG_PATH</b> as appropriate:<br><br>
<b class="cmd">export "PKG_CONFIG_PATH=/usr/local/lib/pkgconfig"</b><br><br>
All right, your system configuration is ready to build <i>fontconfig</i>, so you can now:
<ul>
	<li>download the latest sources: <a href="http://cairographics.org/releases/pixman-0.20.2.tar.gz">pixman-0.20.2.tar.gz</a></li>
	<li>uncompress this gzipped-file</li>
	<li>then untar the <i>tarball</i></li>
	<li>and finally open an MSYS shell</li>
</ul>
<b class="cmd">cd pixman-0.20.2</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<hr>
<h3><a name="libcairo">Step 16) building libcairo</a></h3>
<b>libcairo</b> is a very popular <b>graphics</b> library.<br>
Depends on: <b>libpixman</b>, <b>libfreetype</b>, <b>libfontconfig</b>, <b>libpng</b><br>
Required by: <b>libgaiagraphics</b>, ...<br><br>
Building under Windows is a little bit harder than usual.<br>
First of all, you must check if you've already installed <b>pkg-config.exe</b><br>
If not, please read the above <a href="#pkg-config">instructions</a><br><br>
And now you must set the <b>PKG_CONFIG_PATH</b> as appropriate:<br><br>
<b class="cmd">export "PKG_CONFIG_PATH=/usr/local/lib/pkgconfig"</b><br><br>
All right, your system configuration is ready to build <i>libcairo</i>, so you can now:
<ul>
	<li>download the latest sources: <a href="http://cairographics.org/releases/cairo-1.10.2.tar.gz">cairo-1.10.2.tar.gz</a></li>
	<li>uncompress this gzipped-file</li>
	<li>then untar the <i>tarball</i></li>
	<li>and finally open an MSYS shell</li>
</ul>
<b class="cmd">cd cairo-1.10.2</b><br>
<b class="cmd">export "CFLAGS=-I/usr/local/include"</b><br>
<b class="cmd">export "LDFLAGS=-L/usr/local/lib"</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32 --disable-pthread</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
<u>Important notice:</u> you'll probably get a fatal error at some time during the compilation:<br>
to resolve this issue you should manually edit the <b>cairo-1.10.2/src/cairo.c</b> source:
<table bgcolor="#ffffe0">
<tbody><tr><td>near line 149:<br>------------</td></tr>
<tr><td>&lt; };<br>
&lt; #include &lt;assert.h&gt;<br>
&lt; <br>
&lt; /**<br>
&lt; &nbsp;* _cairo_error:</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; };<br>
&gt; #include &lt;assert.h&gt;<br>
&gt; <br>
&gt; #ifdef __MINGW32__<br>
&gt; #define ffs __builtin_ffs<br>
&gt; #endif<br>
&gt; <br>
&gt; /**<br>
&gt; &nbsp;* _cairo_error:</td></tr>
<tr><td><hr></td></tr>
</tbody></table><br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<hr>
<h3><a name="libgaiagraphics">Step 17) building libgaiagraphics</a></h3>
<b>libgaiagraphics</b> is a common utility library supporting <b>graphics rendendering</b><br>
Depends on: <b>libjpeg</b>, <b>libpng</b>, <b>libtiff</b>, <b>libgeotiff</b>, <b>libcairo</b><br><br>
Required by: <b>spatialite-gui</b> [<i>next-to-come</i> releases of <b>librasterlite</b> and <b>spatialite-gis]</b><br><br>
Building under Windows is an easy task.<br>
First of all, you must check if you've already installed <b>pkg-config.exe</b><br>
If not, please read the above <a href="#pkg-config">instructions</a><br><br>
And now you must set the <b>PKG_CONFIG_PATH</b> as appropriate:<br><br>
<b class="cmd">export "PKG_CONFIG_PATH=/usr/local/lib/pkgconfig"</b><br><br>
All right, your system configuration is ready to build <i>libgaiagraphics</i>, so you can now:
<ul>
	<li>download the latest sources: <a href="http://www.gaia-gis.it/spatialite-3.0.0-BETA/libgaiagraphics.0.4.zip">libgaiagraphics-0.4.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
<b class="cmd">cd libgaiagraphics-0.4</b><br>
<b class="cmd">export "CFLAGS=-I/usr/local/include"</b><br>
<b class="cmd">export "LDFLAGS=-L/usr/local/lib"</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32 --target=mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<hr>
<h3><a name="spatialite-gui">Step 18) building spatialite_gui</a></h3>
<b>spatialite_gui</b> the <b>SpatiaLite</b> <i>GUI</i> user-friendly tool<br>
Depends on: <b>libspatialite</b>, <b>wxWidgets</b>, <b>libgaiagraphics</b><br>
Building under Windows is an easy task.
<ul>
	<li>download the latest sources: <a href="http://www.gaia-gis.it/spatialite-3.0.0-BETA/spatialite_gui-1.5.0-beta.zip">spatialite_gui-1.5.0-beta.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
First of all, you must check if you've already installed <b>pkg-config.exe</b><br>
If not, please read the above <a href="#pkg-config">instructions</a><br><br>
And now you must set the <b>PKG_CONFIG_PATH</b> as appropriate:<br><br>
<b class="cmd">export "PKG_CONFIG_PATH=/usr/local/lib/pkgconfig"</b><br><br>
After this you are now ready to build as usual:<br><br>
<b class="cmd">cd spatialite_gui-1.5.0-beta</b><br>
<b class="cmd">export "CFLAGS=-I/usr/local/include"</b><br>
<b class="cmd">export "LDFLAGS=-L/usr/local/lib"</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
<u>Please note</u>: following the above method you'll get a <i>dynamically linked</i> GUI tool [i.e. depending on DLLs].<br>
If you whish instead to build a <i>statically linked</i> GUI tool 
[i.e. self contained, not depending on DLLs], now type:<br><br>
<b class="cmd">mkdir static_bin</b><br>
<b class="cmd">make -f Makefile-static-MinGW</b><br>
<b class="cmd">cp static_bin/* /usr/local/bin</b><br><br>
<hr>
<h3><a name="open-ssl">Step 19) building OpenSSL</a></h3>
<b>OpenSSL</b> is a well known standard library supporting <b>SSL</b>, i.e. the <b>encrypted HTTPS</b> web protocol.<br>
Depends on: <b>nothing</b><br>
Required by: <b>libcurl</b><br><br>
Building under Windows is a little bit difficult, and requires to pay close attention.<br>
The <b>configure</b> script isn't at all a standard one: please read carefully the following instructions.<br>
<ul>
	<li>download the latest sources: <a href="http://www.openssl.org/source/openssl-1.0.0d.tar.gz">openssl-1.0.0d.tar.gz</a></li>
	<li><u>Important notice:</u> you cannot use tools such as <b>7z</b> to untar the <i>tarball</i>:
		this will cause fatal errors during compilation (<i>broken links</i>).<br>
		You absolutely have to run all the following commands from the MSYS shell.<br>
</li></ul>
<b class="cmd">tar zxvf openssl-1.0.0d.tar.gz</b><br>
<b class="cmd">cd openssl-1.0.0d</b><br>
<b class="cmd">./Configure mingw64 --prefix=/usr/local shared no-asm</b><br><br>
Several manual adjustments are now required; you must first edit <b>openssl-1.0.0d/Makefile</b>:
<table bgcolor="#ffffe0">
<tbody><tr><td>62c62</td></tr>
<tr><td>&lt; CC= gcc</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; CC= x86_64-w64-mingw32-gcc</td></tr>
<tr><td><hr></td></tr>
</tbody><tbody><tr><td>62,63c62,63</td></tr>
<tr><td>&lt; AR= ar $(ARFLAGS) r<br>
&lt; RANLIB= /c/MinGW/bin/ranlib.exe<br>
&lt; NM= nm</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; AR= x86_64-w64-mingw32-ar $(ARFLAGS) r<br>
&gt; RANLIB= x86_64-w64-mingw32-ranlib.exe<br>
&gt; x86_64-w64-mingw32-nm</td></tr>
<tr><td><hr></td></tr>
</tbody><tbody><tr><td>75c75</td></tr>
<tr><td>&lt; MAKEDEPPROG= gcc</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; MAKEDEPPROG= x86_64-w64-mingw32-gcc</td></tr>
<tr><td><hr></td></tr>
</tbody></table><br>
After applying the above patches you are now to build <i>OpenSSL</i>:<br><br>
<b class="cmd">export "CROSS_COMPILE=x86_64-w64-mingw32-</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install</b><br><br>
This will build and install both the <i>static libraries</i> and the DLLs as well.<br><br>
<hr>
<h3><a name="libcurl">Step 20) building libcurl</a></h3>
<b>libcurl</b> is a well known library supporting <b>URL</b>s (networking, web protocols)<br>
Depends on: <b>libz</b>, <b>OpenSSL</b><br>
Required by: <b>?</b><br><br>
Building under Windows is an easy task.
<ul>
	<li>download the latest sources: <a href="http://curl.haxx.se/download/curl-7.21.7.zip">curl-7.21.7.zip</a></li>
	<li>uncompress this zip-file</li>
	<li>then open an MSYS shell</li>
</ul>
First of all, you must check if you've already installed <b>pkg-config.exe</b><br>
If not, please read the above <a href="#pkg-config">instructions</a><br><br>
And now you must set the <b>PKG_CONFIG_PATH</b> as appropriate:<br><br>
<b class="cmd">export "PKG_CONFIG_PATH=/usr/local/lib/pkgconfig"</b><br><br>
After this you are now ready to build as usual:<br><br>
<b class="cmd">cd curl-7.21.7</b><br>
<b class="cmd">export "CFLAGS=-I/usr/local/include"</b><br>
<b class="cmd">export "LDFLAGS=-L/usr/local/lib"</b><br>
<b class="cmd">./configure --host=x86_64-w64-mingw32</b><br>
<b class="cmd">make</b><br>
<b class="cmd">make install-strip</b><br><br>
<u>Important notice:</u> you'll probably get a fatal error at some time during the compilation:<br>
to resolve this issue you should manually edit the <b>curl-7.21.7/src/main.c</b> source:
<table bgcolor="#ffffe0">
<tbody><tr><td>near line 465:<br>------------</td></tr>
<tr><td>&lt; static int ftruncate64(int fd, curl_off_t where)<br>
&lt; {<br>
&lt; &nbsp;&nbsp;if(_lseeki64(fd, where, SEEK_SET) &lt; 0)<br>
&lt; &nbsp;&nbsp;&nbsp;&nbsp;return -1;<br>
&lt; <br>
&lt; &nbsp;&nbsp;if(!SetEndOfFile((HANDLE)_get_osfhandle(fd)))<br>
&lt; &nbsp;&nbsp;&nbsp;&nbsp;return -1;<br>
&lt; <br>
&lt; &nbsp;&nbsp;return 0;<br>
&lt; }<br>
&lt; #define ftruncate(fd,where) ftruncate64(fd,where)</td></tr>
<tr><td>---</td></tr>
<tr><td>&gt; /*<br>
&gt; static int ftruncate64(int fd, curl_off_t where)<br>
&gt; {<br>
&gt; &nbsp;&nbsp;if(_lseeki64(fd, where, SEEK_SET) &lt; 0)<br>
&gt; &nbsp;&nbsp;&nbsp;&nbsp;return -1;<br>
&gt; <br>
&gt; &nbsp;&nbsp;if(!SetEndOfFile((HANDLE)_get_osfhandle(fd)))<br>
&gt; &nbsp;&nbsp;&nbsp;&nbsp;return -1;<br>
&gt; <br>
&gt; &nbsp;&nbsp;return 0;<br>
&gt; }<br>
&gt; #define ftruncate(fd,where) ftruncate64(fd,where)<br>
&gt; */</td></tr>
<tr><td><hr></td></tr>
</tbody></table><br>
This will build and install both the <i>static library</i> and the DLL 
as well.<br><br>
<hr>
<a href="http://www.gaia-gis.it/spatialite-3.0.0-BETA/sources.html">back</a>

</body></html>